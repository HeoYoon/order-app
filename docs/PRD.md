# 커피 주문앱

## 1. 프로젝트 개요

### 1.1. 프로젝트명
커피 주문 앱

### 1.2. 프로젝트 목적
사용자가 커피 메뉴를 주문하고, 관리자가 주문을 관리할 수 있는 간단한 풀스택 웹 앱 

### 1.3. 개발 범위
- 주문하기 화면 (메뉴 선택 및 장바구 기능)
- 관리자 화면 (재고 관리 및 주문 상태 관리)
- 데이터를 생성/조회/수정/삭제할 수 있는 기능

## 2. 기술 스택
- 프론트엔드: HTML, CSS, 리액트, 자바스크립트
- 백엔드: Node,js, Express
- 데이터베이스: PostgreSQL

## 3. 주문하기 화면 상세 요구사항

### 3.1. 화면 구성
주문하기 화면은 크게 3개의 섹션으로 구성됩니다:
- **헤더 영역**: 앱 제목과 네비게이션 버튼
- **메뉴 영역**: 커피 메뉴 카드들이 가로 스크롤로 배치
- **장바구니 영역**: 선택한 메뉴 목록과 주문 버튼

### 3.2. 헤더 영역
- **앱 제목**: "Coffee ORDER" (왼쪽 상단)
- **주문하기 버튼**: 현재 화면이므로 비활성화 상태 또는 현재 페이지 표시
- **관리자 버튼**: 관리자 화면으로 이동하는 버튼 (오른쪽 상단)

### 3.3. 메뉴 영역
#### 3.3.1. 메뉴 카드 구성
각 메뉴 카드는 다음 요소들을 포함합니다:
- **메뉴 이미지**: 고품질 커피 사진
- **메뉴명**: 한국어 메뉴명 (예: 아메리카노, 카페 라떼, 카푸치노)
- **기본 가격**: 원화 표시 (예: 4,500원, 5,000원)
- **추가 옵션**: 
  - 샷 추가 (+500원)
  - 시럽 추가 (바닐라 시럽 +500원, 기본 시럽 +0원)
  - 시나몬 추가 (+0원)
- **담기 버튼**: "+ 담기" 텍스트와 함께 어두운 배경의 버튼

#### 3.3.2. 메뉴 데이터
- **아메리카노**: 4,500원
  - 샷 추가: +500원
  - 시럽 추가: +0원
- **카페 라떼**: 5,000원
  - 샷 추가: +500원
  - 바닐라 시럽: +500원
- **카푸치노**: 5,000원
  - 샷 추가: +500원
  - 시나몬 추가: +0원

### 3.4. 장바구니 영역
#### 3.4.1. 장바구니 헤더
- **장바구니 아이콘**과 "장바구니" 텍스트

#### 3.4.2. 장바구니 아이템 목록
각 아이템은 다음 정보를 표시:
- **메뉴명과 수량**: "아메리카노 x 1"
- **선택한 추가 옵션**: "샷 추가, 시럽 추가"
- **가격**: 기본 가격 + 추가 옵션 가격
- **삭제 버튼**: 휴지통 아이콘

#### 3.4.3. 총액 및 주문 버튼
- **총액 표시**: "총액" 라벨과 함께 총 금액 (예: 14,500원)
- **주문하기 버튼**: 장바구니 영역 전체 너비의 어두운 버튼
- **도움말 아이콘**: 우하단 "?" 아이콘

### 3.5. 사용자 인터랙션
#### 3.5.1. 메뉴 선택
- 메뉴 카드의 "담기" 버튼 클릭 시 장바구니에 추가
- 추가 옵션 선택 기능 (체크박스 또는 토글)
- 동일 메뉴 재선택 시 수량 증가

#### 3.5.2. 장바구니 관리
- 아이템 삭제: 휴지통 아이콘 클릭
- 수량 변경: +/- 버튼 (추후 구현)
- 실시간 총액 계산

#### 3.5.3. 주문 프로세스
- "주문하기" 버튼 클릭 시 주문 확인
- 주문 완료 후 장바구니 초기화

### 3.6. UI/UX 요구사항
#### 3.6.1. 디자인
- **색상**: 깔끔한 흰색 배경, 어두운 버튼 (주문/담기 버튼)
- **레이아웃**: 반응형 디자인, 모바일 우선
- **타이포그래피**: 명확한 한글 폰트, 가격은 강조 표시

#### 3.6.2. 사용성
- **직관적 네비게이션**: 명확한 버튼과 아이콘
- **즉시 피드백**: 버튼 클릭 시 시각적 피드백
- **접근성**: 충분한 터치 영역, 명확한 대비

#### 3.6.3. 반응형 디자인
- **모바일**: 세로 레이아웃, 터치 친화적
- **태블릿**: 가로 레이아웃 고려
- **데스크톱**: 적절한 최대 너비 설정

## 4. 관리자 화면 상세 요구사항

### 4.1. 화면 구성
관리자 화면은 크게 3개의 주요 섹션으로 구성됩니다:
- **대시보드 요약**: 주요 지표를 카드 형태로 표시
- **재고 현황**: 재고 수량 조정 기능
- **주문 현황**: 주문 목록과 상태 관리

### 4.2. 대시보드 요약 영역
#### 4.2.1. 지표 카드 구성
4개의 카드로 주요 지표를 표시:

- **총 주문 수 (Total Orders)**
  - 아이콘: 서류 가방 아이콘
  - 값: 숫자 (예: 5)
  - 설명: 전체 주문 건수

- **주문 접수 (Orders Received)**
  - 아이콘: 시계 아이콘
  - 값: 숫자 (예: 1)
  - 설명: 접수 대기 중인 주문 수

- **제조 중 (Manufacturing)**
  - 아이콘: 보라색 커피잔 아이콘 (진행 중 표시)
  - 값: 숫자 (예: 2)
  - 설명: 현재 제조 중인 주문 수

- **제조 완료 (Manufacturing Complete)**
  - 아이콘: 초록색 체크마크 아이콘
  - 값: 숫자 (예: 2)
  - 설명: 제조 완료된 주문 수

### 4.3. 재고 현황 영역
#### 4.3.1. 재고 관리 기능
각 메뉴별로 재고 수량을 조정할 수 있는 UI 제공:

- **아메리카노**
  - 현재 재고 표시: "재고: 50개"
  - 수량 조정: '-' 버튼, 숫자 입력, '+' 버튼
  - 실시간 업데이트

- **카페 라떼**
  - 현재 재고 표시: "재고: 35개"
  - 수량 조정: '-' 버튼, 숫자 입력, '+' 버튼
  - 실시간 업데이트

#### 4.3.2. 재고 조정 기능
- **증가/감소 버튼**: +/- 버튼으로 수량 조정
- **직접 입력**: 숫자 필드에 직접 입력 가능
- **저장 기능**: 변경사항 자동 저장 또는 저장 버튼
- **재고 부족 알림**: 재고가 일정 수준 이하로 떨어질 때 알림

### 4.4. 주문 현황 영역
#### 4.4.1. 주문 테이블 구성
테이블 컬럼:
- **시간**: 주문 접수 시간 (예: 14:23)
- **상품명**: 주문한 메뉴와 수량 (예: 아메리카노 x 2, 카페 라떼 x 1)
- **총 가격**: 주문 총액 (예: 14,000원)
- **주문 상태**: 현재 주문 상태 (색상별 라벨)
- **액션**: 상태 변경 버튼

#### 4.4.2. 주문 상태 관리
주문 상태는 3단계로 구분:

- **주문 접수** (주황색 라벨)
  - 액션: "제조 중으로 변경" 버튼
  - 설명: 새로 들어온 주문

- **제조 중** (보라색 라벨)
  - 액션: "제조 완료로 변경" 버튼
  - 설명: 현재 제조 중인 주문

- **제조 완료** (연두색 라벨)
  - 액션: 버튼 없음 (최종 상태)
  - 설명: 제조가 완료된 주문

#### 4.4.3. 주문 데이터 예시
- **14:23 주문**: 아메리카노 x 2, 카페 라떼 x 1 (14,000원) - 주문 접수
- **14:18 주문**: 카푸치노 x 1, 에스프레소 x 2 (12,000원) - 제조 중
- **14:12 주문**: 바닐라 라떼 x 3 (16,500원) - 제조 중
- **14:05 주문**: 아메리카노 x 1, 카페 모카 x 1 (10,000원) - 제조 완료
- **13:58 주문**: 카페 라떼 x 2 (10,000원) - 제조 완료

### 4.5. 사용자 인터랙션
#### 4.5.1. 재고 관리
- **수량 조정**: +/- 버튼 클릭으로 재고 수량 변경
- **직접 입력**: 숫자 필드에 직접 수량 입력
- **실시간 반영**: 변경사항 즉시 반영

#### 4.5.2. 주문 상태 관리
- **상태 변경**: "제조 중으로 변경", "제조 완료로 변경" 버튼
- **일괄 처리**: 여러 주문 동시 처리 기능 (추후 구현)
- **주문 상세**: 주문 클릭 시 상세 정보 모달 (추후 구현)

#### 4.5.3. 대시보드 업데이트
- **실시간 업데이트**: 주문 상태 변경 시 대시보드 자동 갱신
- **새로고침**: 수동 새로고침 기능

### 4.6. UI/UX 요구사항
#### 4.6.1. 디자인
- **색상 체계**: 
  - 주문 접수: 주황색 (#FFA500)
  - 제조 중: 보라색 (#8A2BE2)
  - 제조 완료: 연두색 (#90EE90)
- **카드 디자인**: 깔끔한 카드 형태의 지표 표시
- **테이블 디자인**: 명확한 구분선과 호버 효과

#### 4.6.2. 사용성
- **직관적 상태 표시**: 색상과 아이콘으로 상태 구분
- **빠른 액션**: 원클릭으로 상태 변경
- **명확한 피드백**: 상태 변경 시 시각적 피드백

#### 4.6.3. 반응형 디자인
- **모바일**: 카드 형태로 세로 배치
- **태블릿**: 2열 레이아웃
- **데스크톱**: 4열 레이아웃

### 4.7. 데이터 관리
#### 4.7.1. 실시간 동기화
- 주문 접수 시 대시보드 자동 업데이트
- 재고 변경 시 실시간 반영
- 주문 상태 변경 시 즉시 갱신

#### 4.7.2. 데이터 보존
- 주문 이력 보존 (완료된 주문도 표시)
- 재고 변경 이력 (추후 구현)
- 일별/월별 통계 (추후 구현)

## 5. 백엔드 개발 요구사항

### 5.1. 데이터 모델

#### 5.1.1. Menus 테이블
메뉴 정보를 저장하는 테이블:
- **id**: 메뉴 고유 식별자 (Primary Key, Auto Increment)
- **name**: 커피 이름 (예: "아메리카노", "카페 라떼", "카푸치노")
- **description**: 메뉴 설명 (예: "진한 에스프레소와 뜨거운 물의 완벽한 조화")
- **price**: 기본 가격 (정수, 원 단위)
- **image_url**: 메뉴 이미지 URL 경로
- **stock_quantity**: 재고 수량 (정수)
- **created_at**: 생성 일시
- **updated_at**: 수정 일시

#### 5.1.2. Options 테이블
메뉴 옵션 정보를 저장하는 테이블:
- **id**: 옵션 고유 식별자 (Primary Key, Auto Increment)
- **name**: 옵션 이름 (예: "샷 추가", "바닐라 시럽", "시나몬 추가")
- **price**: 옵션 가격 (정수, 원 단위, 0원도 가능)
- **menu_id**: 연결할 메뉴 ID (Foreign Key, Menus 테이블 참조)
- **created_at**: 생성 일시
- **updated_at**: 수정 일시

#### 5.1.3. Orders 테이블
주문 정보를 저장하는 테이블:
- **id**: 주문 고유 식별자 (Primary Key, Auto Increment)
- **order_datetime**: 주문 일시 (DATETIME)
- **order_items**: 주문 내용 JSON 형태로 저장
  - 메뉴명, 수량, 선택한 옵션, 개별 금액 포함
- **total_amount**: 주문 총 금액 (정수, 원 단위)
- **status**: 주문 상태 (ENUM: 'ORDER_RECEIVED', 'MAKING', 'COMPLETED')
- **created_at**: 생성 일시
- **updated_at**: 수정 일시

### 5.2. 사용자 흐름 및 데이터 처리

#### 5.2.1. 메뉴 조회 및 표시
- **프론트엔드**: 메뉴 목록 화면 로드 시 API 호출
- **백엔드**: Menus 테이블에서 모든 메뉴 정보 조회
- **응답 데이터**: 메뉴명, 설명, 가격, 이미지 URL
- **재고 정보**: 관리자 화면에서만 재고 수량 표시

#### 5.2.2. 장바구니 기능
- **클라이언트 사이드**: 선택한 메뉴와 옵션을 임시 저장
- **장바구니 표시**: 메뉴명, 수량, 선택 옵션, 계산된 금액
- **실시간 계산**: 기본 가격 + 옵션 가격의 총합

#### 5.2.3. 주문 처리
- **주문 데이터 생성**: Orders 테이블에 새 레코드 생성
- **주문 내용 저장**: order_items 필드에 JSON 형태로 저장
  ```json
  {
    "items": [
      {
        "menu_id": 1,
        "menu_name": "아메리카노",
        "quantity": 2,
        "options": ["샷 추가"],
        "item_price": 5000,
        "total_price": 10000
      }
    ]
  }
  ```
- **재고 차감**: 주문한 메뉴의 재고 수량 자동 감소
- **주문 상태**: 기본값 'ORDER_RECEIVED'로 설정

#### 5.2.4. 관리자 주문 현황
- **주문 목록 조회**: Orders 테이블에서 모든 주문 정보 조회
- **상태별 필터링**: 주문 상태별로 주문 건수 카운트
- **실시간 업데이트**: 주문 상태 변경 시 즉시 반영

#### 5.2.5. 주문 상태 관리
- **상태 변경**: 관리자가 주문 상태를 단계별로 변경
- **상태 흐름**: 주문 접수 → 제조 중 → 제조 완료
- **재고 관리**: 주문 완료 시 재고 수량 업데이트

### 5.3. API 설계

#### 5.3.1. 메뉴 관련 API

**GET /api/menus**
- **목적**: 모든 메뉴 목록 조회
- **응답**: 메뉴 목록 (이름, 설명, 가격, 이미지)
- **사용처**: 주문 화면 메뉴 표시

**GET /api/menus/:id**
- **목적**: 특정 메뉴 상세 정보 조회
- **응답**: 메뉴 상세 정보 + 옵션 목록
- **사용처**: 메뉴 상세 화면

**GET /api/menus/:id/options**
- **목적**: 특정 메뉴의 옵션 목록 조회
- **응답**: 옵션 목록 (이름, 가격)
- **사용처**: 메뉴 선택 시 옵션 표시

#### 5.3.2. 주문 관련 API

**POST /api/orders**
- **목적**: 새 주문 생성
- **요청 본문**:
  ```json
  {
    "items": [
      {
        "menu_id": 1,
        "quantity": 2,
        "options": [1, 2],
        "item_price": 5000
      }
    ],
    "total_amount": 10000
  }
  ```
- **처리 로직**: 
  - Orders 테이블에 주문 정보 저장
  - Menus 테이블의 재고 수량 차감
  - 주문 상태를 'ORDER_RECEIVED'로 설정
- **응답**: 생성된 주문 ID

**GET /api/orders**
- **목적**: 모든 주문 목록 조회 (관리자용)
- **응답**: 주문 목록 (시간, 상품명, 총액, 상태)
- **사용처**: 관리자 화면 주문 현황

**GET /api/orders/:id**
- **목적**: 특정 주문 상세 정보 조회
- **응답**: 주문 상세 정보
- **사용처**: 주문 상세 화면

**PUT /api/orders/:id/status**
- **목적**: 주문 상태 변경
- **요청 본문**:
  ```json
  {
    "status": "MAKING" // 또는 "COMPLETED"
  }
  ```
- **처리 로직**: Orders 테이블의 status 필드 업데이트
- **사용처**: 관리자 화면에서 주문 상태 변경

#### 5.3.3. 재고 관리 API

**GET /api/menus/stock**
- **목적**: 모든 메뉴의 재고 현황 조회 (관리자용)
- **응답**: 메뉴별 재고 수량
- **사용처**: 관리자 화면 재고 현황

**PUT /api/menus/:id/stock**
- **목적**: 특정 메뉴의 재고 수량 수정
- **요청 본문**:
  ```json
  {
    "stock_quantity": 50
  }
  ```
- **처리 로직**: Menus 테이블의 stock_quantity 필드 업데이트
- **사용처**: 관리자 화면에서 재고 수량 조정

#### 5.3.4. 대시보드 통계 API

**GET /api/dashboard/stats**
- **목적**: 관리자 대시보드 통계 정보 조회
- **응답**:
  ```json
  {
    "total_orders": 5,
    "orders_received": 1,
    "orders_making": 2,
    "orders_completed": 2
  }
  ```
- **처리 로직**: Orders 테이블에서 상태별 주문 건수 집계
- **사용처**: 관리자 화면 대시보드 요약

### 5.4. 데이터베이스 스키마

#### 5.4.1. 테이블 생성 SQL

```sql
-- Menus 테이블
CREATE TABLE menus (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    description TEXT,
    price INTEGER NOT NULL,
    image_url VARCHAR(255),
    stock_quantity INTEGER DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Options 테이블
CREATE TABLE options (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    price INTEGER DEFAULT 0,
    menu_id INTEGER REFERENCES menus(id) ON DELETE CASCADE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Orders 테이블
CREATE TABLE orders (
    id SERIAL PRIMARY KEY,
    order_datetime TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    order_items JSONB NOT NULL,
    total_amount INTEGER NOT NULL,
    status VARCHAR(20) DEFAULT 'ORDER_RECEIVED',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    CHECK (status IN ('ORDER_RECEIVED', 'MAKING', 'COMPLETED'))
);

-- 인덱스 생성
CREATE INDEX idx_orders_status ON orders(status);
CREATE INDEX idx_orders_datetime ON orders(order_datetime);
CREATE INDEX idx_options_menu_id ON options(menu_id);
```

#### 5.4.2. 초기 데이터 삽입

```sql
-- 메뉴 초기 데이터
INSERT INTO menus (name, description, price, image_url, stock_quantity) VALUES
('아메리카노', '진한 에스프레소와 뜨거운 물의 완벽한 조화', 4500, '/images/americano.svg', 50),
('카페 라떼', '부드러운 우유와 에스프레소의 만남', 5000, '/images/cafe-latte.svg', 35),
('카푸치노', '진한 에스프레소 위에 올라간 벨벳같은 우유 거품', 5000, '/images/cappuccino.svg', 40);

-- 옵션 초기 데이터
INSERT INTO options (name, price, menu_id) VALUES
('샷 추가', 500, 1),
('샷 추가', 500, 2),
('샷 추가', 500, 3),
('바닐라 시럽', 500, 2),
('시나몬 추가', 0, 3);
```

### 5.5. 에러 처리 및 검증

#### 5.5.1. 주문 생성 시 검증
- 메뉴 존재 여부 확인
- 재고 수량 충분 여부 확인
- 옵션 유효성 검증
- 가격 계산 정확성 검증

#### 5.5.2. 재고 관리 시 검증
- 재고 수량이 음수가 되지 않도록 검증
- 주문 완료 시에만 재고 차감
- 재고 부족 시 주문 거부 처리

#### 5.5.3. 상태 변경 검증
- 주문 상태 변경 규칙 준수 (순차적 변경)
- 존재하지 않는 주문 ID 처리
- 권한 검증 (관리자만 상태 변경 가능)

## 6. 기본 사항
- 프론트엔드와 백엔드를 따로 개발
- 기본적인 웹 기술만 사용
- 학습 목적이므로 사용자 인증이나 결제 기능은 제외
- 메뉴는 커피 메뉴만 있음